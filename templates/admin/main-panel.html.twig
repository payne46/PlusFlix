<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Panel Administratora{% endblock %}</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('css/admin-panel.css') }}">
    {% endblock %}
</head>
<body>

<div class="container">
    <div class="topbar">
        PLUSFLIX: Panel Administratora
    </div>

    <div class="tab-container">
        <button class="tab-button active" data-tab="films">FILMY</button>
        <button class="tab-button" data-tab="platforms">PLATFORMY</button>
    </div>

    <div class="util-list">
        <div class="buttons-container">
            <button class="util-button" id="add-button">DODAJ</button>
            <button class="util-button" id="edit-button">EDYTUJ</button>
            <button class="util-button" id="delete-button">USUŃ</button>
        </div>

        <div class="search-container">
            <div class="search-wrapper">
                <span class="material-symbols-outlined search-icon">search</span>
                <input class="searchbar" />
            </div>
        </div>
    </div>

    <div class="tab-content" id="films">
        <ul class="item-list">
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-1" data-id="1" />
                    <label for="checkbox-1"></label>
                </div>
                <div>
                    Harry Potter i Kamień Inżynierski
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-2" data-id="2" />
                    <label for="checkbox-2"></label>
                </div>
                <div>
                    Harry Potter i Komnata Habilitacji
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-3" data-id="3" />
                    <label for="checkbox-3"></label>
                </div>
                <div>
                    Harry Potter i Więzień Uczelni
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-4" data-id="4" />
                    <label for="checkbox-4"></label>
                </div>
                <div>
                    Harry Potter i Czara Dyplomowa
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-5" data-id="5" />
                    <label for="checkbox-5"></label>
                </div>
                <div>
                    Harry Potter i Zakon Poprawkowicza
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-6" data-id="6" />
                    <label for="checkbox-6"></label>
                </div>
                <div>
                    Harry Potter i Książę Pół-Algorytmu
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-7" data-id="7" />
                    <label for="checkbox-7"></label>
                </div>
                <div>
                    Harry Potter i Insygnia Egzaminacyjne
                </div>
            </li>
        </ul>
    </div>

    <div class="tab-content hidden" id="platforms">
        <ul class="item-list">
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-11" data-id="1" />
                    <label for="checkbox-11"></label>
                </div>
                <div>
                    Netflix
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-22" data-id="2" />
                    <label for="checkbox-22"></label>
                </div>
                <div>
                    Amazon Prime
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-33" data-id="3" />
                    <label for="checkbox-33"></label>
                </div>
                <div>
                    HBO Max
                </div>
            </li>
            <li class="item">
                <div class="round-checkbox">
                    <input type="checkbox" id="checkbox-44" data-id="4" />
                    <label for="checkbox-44"></label>
                </div>
                <div>
                    Disney+
                </div>
            </li>
        </ul>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(".tab-button");
        const tabs = document.querySelectorAll(".tab-content");
        const addButton = document.getElementById('add-button');
        const editButton = document.getElementById('edit-button');
        const deleteButton = document.getElementById('delete-button');

        let currentTab = 'films';
        let selectedItemId = null;

        buttons.forEach(button => {
            button.addEventListener("click", () =>
            {
                const tabId = button.dataset.tab;
                currentTab = tabId;

                buttons.forEach(b => b.classList.remove("active"));
                button.classList.add("active");

                tabs.forEach(tab =>
                {
                    tab.classList.toggle("hidden", tab.id !== tabId);
                });

                selectedItemId = null;
                document.querySelectorAll('.round-checkbox input[type="checkbox"]').forEach(cb =>
                {
                    cb.checked = false;
                });
            });
        });

        document.querySelectorAll('.round-checkbox input[type="checkbox"]').forEach(checkbox =>
        {
            checkbox.addEventListener('change', (e) =>
            {
                if (e.target.checked)
                {
                    document.querySelectorAll('.round-checkbox input[type="checkbox"]').forEach(cb =>
                    {
                        if (cb !== e.target) cb.checked = false;
                    });

                    selectedItemId = e.target.dataset.id;
                }
                else
                {
                    selectedItemId = null;
                }
            });
        });

        // Dodawanie
        addButton.addEventListener('click', () =>
        {
            if (currentTab === 'films')
            {
                window.location.href = '{{ path("admin_movie_add") }}';
            }
            else if (currentTab === 'platforms')
            {
                window.location.href = '{{ path("admin_platform_add") }}';
            }
        });

        // Edycja
        editButton.addEventListener('click', () =>
        {
            if (!selectedItemId)
            {
                alert('Proszę wybrać element do edycji');
                return;
            }

            if (currentTab === 'films')
            {
                window.location.href = `/admin/movie/edit/${selectedItemId}`;
            }
            else if (currentTab === 'platforms')
            {
                window.location.href = `/admin/platform/edit/${selectedItemId}`;
            }
        });

        // Usuwanie
        deleteButton.addEventListener('click', () =>
        {
            if (!selectedItemId)
            {
                alert('Proszę wybrać element do usunięcia');
                return;
            }

            if (confirm('Czy na pewno chcesz usunąć wybrany element?'))
            {
                // dodac usuwanie
            }
        });
    });
</script>
</body>
</html>
